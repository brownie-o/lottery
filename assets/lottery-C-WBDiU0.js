import{l as v,r as c}from"./index-CM5GnZsQ.js";const D=v("lottery",()=>{const r=c(null),a=c([]),s=c(!1),i=(e,t)=>Math.round(Math.random()*(t-e))+e,n=()=>{localStorage.setItem("lotteryHistory",JSON.stringify(a.value))},u=()=>{r.value?localStorage.setItem("lotteryCurrentDraw",JSON.stringify(r.value)):localStorage.removeItem("lotteryCurrentDraw")};return{currentDraw:r,history:a,isConfirmed:s,roll:()=>{s.value=!1;let e=[];for(;e.length<6;){const l=i(1,38);e.includes(l)||e.push(l)}e.sort((l,m)=>l-m);const t=i(1,8),o={id:Date.now(),numbers:e,special:t,date:new Date().toLocaleString()};r.value=o,u()},confirmDraw:()=>{r.value&&!s.value&&(a.value.unshift(r.value),n(),s.value=!0,r.value=null,u())},updateCurrentDraw:(e,t)=>{r.value&&(r.value.numbers=e.sort((o,l)=>o-l),r.value.special=t,u())},removeHistoryItem:e=>{a.value=a.value.filter(t=>t.id!==e),n()},updateComment:(e,t)=>{const o=a.value.find(l=>l.id===e);o&&(o.comment=t,n())},loadHistory:()=>{const e=localStorage.getItem("lotteryHistory");if(e)try{a.value=JSON.parse(e)}catch(o){console.error("Failed to parse history",o),a.value=[]}const t=localStorage.getItem("lotteryCurrentDraw");if(t)try{r.value=JSON.parse(t)}catch(o){console.error("Failed to parse current draw",o)}},clearHistory:()=>{confirm("Are you sure you want to clear the history?")&&(a.value=[],localStorage.removeItem("lotteryHistory"))}}});export{D as u};
