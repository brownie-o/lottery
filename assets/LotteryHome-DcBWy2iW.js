import{_ as A,s as B,r as v,o as M,c as t,a as e,b as h,u as n,F as u,d as f,t as c,w as g,v as w,e as N,f as x,R as U,n as z,T as F,g as I,h as l,i as G}from"./index-CM5GnZsQ.js";import{u as O}from"./lottery-C-WBDiU0.js";const P={class:"glass-container"},$={key:0,class:"lottery-display"},j={class:"ball special"},J=["onUpdate:modelValue"],K={key:1,class:"error-msg"},Q={key:2,class:"lottery-display",style:{"min-height":"66px","align-items":"center",color:"white"}},W={class:"controls"},X={key:0,class:"confirm-controls"},Y={key:1,class:"confirm-controls"},Z={key:3,class:"history-section"},ss={class:"history-header"},es={class:"history-info"},ts={class:"history-numbers"},ls={class:"small-ball"},os={class:"small-ball special"},ns={class:"timestamp"},as=["onClick"],is={__name:"LotteryHome",setup(rs){const _=O(),{currentDraw:i,history:C,isConfirmed:R}=B(_),{roll:b,confirmDraw:T,removeHistoryItem:V,loadHistory:L}=_,d=v(!1),m=v([]),y=v(null),r=v(""),k=v(!1),D=async()=>{k.value=!0,T(),await I(),setTimeout(()=>{k.value=!1},50)},E=()=>{i.value&&(m.value=[...i.value.numbers],y.value=i.value.special,d.value=!0,r.value="")},H=()=>{d.value=!1,r.value=""},S=()=>{const p=m.value,s=y.value;if(p.some(a=>a<1||a>38)){r.value="Numbers must be between 1 and 38";return}if(s<1||s>8){r.value="Special number must be between 1 and 8";return}if(new Set(p).size!==6){r.value="Numbers must be unique";return}_.updateCurrentDraw(p,s),d.value=!1,r.value=""};return M(()=>{L()}),(p,s)=>(l(),t("div",P,[s[8]||(s[8]=e("h1",null,"Lucky Lottery",-1)),n(i)?(l(),t("div",$,[d.value?(l(),t(u,{key:1},[(l(!0),t(u,null,f(m.value,(o,a)=>g((l(),t("input",{key:a,"onUpdate:modelValue":q=>m.value[a]=q,type:"number",class:"ball-input",min:"1",max:"38"},null,8,J)),[[w,m.value[a],void 0,{number:!0}]])),128)),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>y.value=o),type:"number",class:"ball-input special",min:"1",max:"8"},null,512),[[w,y.value,void 0,{number:!0}]])],64)):(l(),t(u,{key:0},[(l(!0),t(u,null,f(n(i).numbers,o=>(l(),t("div",{key:o,class:"ball"},c(o),1))),128)),e("div",j,c(n(i).special),1)],64))])):h("",!0),r.value?(l(),t("div",K,c(r.value),1)):n(i)?h("",!0):(l(),t("div",Q,[...s[3]||(s[3]=[e("p",null,"Press Roll",-1)])])),e("div",W,[d.value?(l(),t("div",X,[e("button",{onClick:H,class:"btn-secondary"},"Cancel"),e("button",{onClick:S,class:"btn-primary btn-save"},"Save")])):n(i)&&!n(R)?(l(),t("div",Y,[e("button",{onClick:E,class:"btn-icon","aria-label":"Edit lottery"},[...s[4]||(s[4]=[e("span",{class:"material-symbols-rounded icon-big"},"edit",-1)])]),e("button",{onClick:s[1]||(s[1]=(...o)=>n(b)&&n(b)(...o)),class:"btn-secondary"},"Roll Again"),e("button",{onClick:D,class:"btn-primary btn-confirm"},"Confirm")])):(l(),t("button",{key:2,onClick:s[2]||(s[2]=(...o)=>n(b)&&n(b)(...o)),class:"btn-primary"},"Roll!"))]),n(C).length>0?(l(),t("div",Z,[e("div",ss,[s[6]||(s[6]=e("h3",null,"History",-1)),N(n(U),{to:"/history",class:"link"},{default:x(()=>[...s[5]||(s[5]=[G("View All",-1)])]),_:1})]),N(F,{name:"swipe",tag:"ul",class:z(["history-list",{"no-leave-animation":k.value}])},{default:x(()=>[(l(!0),t(u,null,f(n(C).slice(0,5),o=>(l(),t("li",{key:o.id,class:"history-item"},[e("div",es,[e("div",ts,[(l(!0),t(u,null,f(o.numbers,a=>(l(),t("div",ls,c(a),1))),256)),e("div",os,c(o.special),1)]),e("span",ns,c(o.date),1)]),e("button",{onClick:a=>n(V)(o.id),class:"btn-remove","aria-label":"Remove item"},[...s[7]||(s[7]=[e("span",{class:"material-symbols-rounded icon-md"},"delete",-1)])],8,as)]))),128))]),_:1},8,["class"])])):h("",!0),s[9]||(s[9]=e("br",null,null,-1)),s[10]||(s[10]=e("a",{href:"https://www.taiwanlottery.com/today_last_number",target:"_blank",class:"link"},"Check Official Results",-1))]))}},ds=A(is,[["__scopeId","data-v-b5de026e"]]);export{ds as default};
